import pygrib
import pandas as pd

from ecmwfapi import ECMWFDataServer
server = ECMWFDataServer()
server.retrieve({
    "class": "ei",
    "dataset": "interim",
    "date": "1998-01-01/to/2008-12-31",
    "expver": "1",
    "grid": "0.1/0.1",
    "area": "-3/-41.5/-8/-37.5",
    "levtype": "sfc",
    "param": "168.128/228.128",
    "step": "12",
    "stream": "oper",
    "time": "00:00:00",
    "type": "fc",
    "target": "output",
})

file = '_mars-atls12-1998to2008.grib'
data = pygrib.open(file)
dp = data.select(name = '2 metre dewpoint temperature')
tp = data.select(name = 'Total precipitation')


#jan=0:31, 365:396, 730:761, 1096:1127, 1461:1492, 1826:1857, 2191:2222, 2557:2588, 2922:2953,3287:3318,3652:3683
#feb=31:59, 396:424, 761:790, 1127:1155, 1492:1520, 1857:1885, 2222:2251, 2588:2616, 2953:2981, 3318:3346, 3683:3712
#mar=59:90, 424:455, 790:821, 1155:1186, 1520:1551, 1885:1916, 2251:2282, 2616:2647, 2981:3012, 3346:3377, 3712:3743
#apr=90:120, 455:485, 821:851, 1186:1216, 1551:1581, 1916:1946, 2282:2312, 2647:2677, 3012:3042, 3377:3407, 3743:3773
#may=120:151, 485:516, 851:882, 1216:1247, 1581:1612, 1946:1977, 2312:2343, 2677:2708, 3042:3073, 3407:3438, 3773:3804
#jun=151:181, 516:546, 882:912, 1247:1277, 1612:1642, 1977:2007, 2343:2373, 2708:2738, 3073:3103, 3438:3468, 3804:3834
#jul=181:212, 546:577, 912:943, 1277:1308, 1642:1673, 2007:2038, 2373:2404, 2738:2769, 3103:3134, 3468:3499, 3834:3865
